#pragma once

/*==============================================================================
cproc info alarm info.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include <string>
#include "json.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

//******************************************************************************
//******************************************************************************
//******************************************************************************
// This class contains cproc configuration and state information.

class CProcInfo
{
public:
   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Constants.

   static const int cMaxStringSize = 100;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // True if valid.
   bool mValidFlag;

   // Json file path.
   char mFilePath[cMaxStringSize];
   char mLockFileName[cMaxStringSize];

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // TTA preferred rf path.
   int  mTTAPreferRFPath;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

    // Constructor.
   CProcInfo();
   void initialize();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Set variable.
   void setTTAPreferRFPath(int aTTAPreferRFPath);

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Lock the json file and read from it.
   void doReadModifyWriteBegin();

   // Perform the calculation, write to the json file, and unlock it.
   void doReadModifyWriteEnd();

   // Lock the json file, read from it, and unlock it.
   void doProtectedRead();

   // Read from the json file.
   void doRead();

   // Write to the json file.
   void doWrite();

   // Return a json value for all of the variables.
   Json::Value getJsonValue();

   // Return a string with json for all of the variables.
   std::string getJsonString();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Support.
   void show(int aPrintFilter = 0);
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global instance.

#ifdef    _CPROCINFO_CPP_
CProcInfo gCProcInfo;
#else
extern CProcInfo gCProcInfo;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************
